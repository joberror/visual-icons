const express=require("express"),path=require("path"),app=express(),fs=require("fs"),sassMiddleware=require("node-sass-middleware"),assets=path.join(__dirname,"src/assets/"),views=path.join(__dirname,"src/views"),router=express.Router();app.set("view engine","pug"),app.set("views",views),app.use(sassMiddleware({src:path.join(assets,"styles"),debug:!0,outputStyle:"compressed",prefix:"/styles"})),app.use(express.static(assets)),app.listen(4e3,(()=>{}));let source="./src/assets/svgs/",source_ex="./src/assets/svg-sample",svg_cat=fs.readdirSync(source),total_per_cat=[],svg_all=[],svg_ex=[];svg_cat.forEach((e=>{svg_all.push(fs.readdirSync(source+e).map((s=>e+"/"+s.split(path.sep).slice(-1)[0])))})),svg_ex.push(fs.readdirSync(source_ex).map((e=>e.split(path.sep).slice(-1)[0]))),svg_all.forEach((e=>{total_per_cat.push(e.length)})),router.get("/",((e,s)=>{s.render("",{svgSample:svg_ex})})),router.get("/viewer",((e,s)=>{s.render("viewer",{catSvg:svg_all,catTotal:total_per_cat,catName:svg_cat})})),router.get("/features",((e,s)=>{s.render("features",{})})),app.use("/",router);